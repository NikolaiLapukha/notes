Рекурсивная функция – это функция, которая вызывает саму себя.

Рассмотрим определение рекурсивной функции `message()`, которая вызывает саму себя.

Приведенный ниже код:

```python
def message():
    print('Это рекурсивная функция')
    message()

message()
```

выводит:

```no-highlight
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
...
```

И этот результат будет повторяться бесконечно (почти).

Подобно циклу, рекурсивная функция должна иметь определенный способ управлять количеством своих повторов.

Приведенный ниже код:

```python
def message(times):
    if times > 0:
        print('Это рекурсивная функция')
        message(times - 1)

message(5)
```

выводит:

```no-highlight
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
Это рекурсивная функция
```


```python
n = int(input())

def func(n: int):
    if n > 0:
        print(n)
        func(n - 5)
    print(n)

func(n)
```


```bash
# вывод
#1
#2
#3
#4
```

## Рекурсивный обход коллекций

Рекурсия является незаменимым помощником при работе с вложенными структурами данных. Рассмотрим несколько задач.

**Задача 1.** Дан список, элементами которого могут быть только строки или аналогичные списки, содержащие строки и вложенные списки. Необходимо вывести все строки из данного списка и из всех вложенных, разделив пробелом.

Рекурсивная реализация функции `get_all_str()`:

```python
def get_all_str(data):
    if type(data) == str:
        print(data, end=' ')            # базовый случай
    if type(data) == list:
        for i in data:
            get_all_str(i)              # рекурсивный случай
```

Приведенный ниже код:

```python
numbers = ['1', ['2', '3', ['4'], ['5', ['6', '7']]]]

get_all_str(numbers)
```

выводит:

```no-highlight
1 2 3 4 5 6 7 
```


**Задача 2.** Дан словарь произвольной вложенности, то есть значениями в словаре могут быть другие словари. Необходимо определить значение, которое соответствует заданному ключу, и вернуть его. При этом гарантируется, что такой ключ имеется в словаре, причем он единственный.

 Рекурсивная реализация функции `find_key()`:

```python
def find_key(data, key):
    if key in data:
        return data[key]                # базовый случай
    
    for v in data.values():
        if type(v) == dict:
            value = find_key(v, key)    # рекурсивный случай
            if value is not None:
                return value 
```

Приведенный ниже код:

```python
info = {'name': 'Alyson', 
        'surname': 'Hannigan', 
        'birthday': {'day': 24, 'month': 'March', 'year': 1974},
        'family': {'parents': {'mother': 'Emilie Posner', 'father': 'Alan Hannigan'}}}

print(find_key(info, 'year'))
print(find_key(info, 'father'))
```

выводит:

```no-highlight
1974
Alan Hannigan
```

